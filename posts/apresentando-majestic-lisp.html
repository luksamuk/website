<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt_BR" xml:lang="pt_BR">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Apresentando Lisps e Majestic Lisp</title>
<meta name="author" content="Lucas S. Vieira" />
<meta name="description" content="Programming, Tech, and occasional rant space by Lucas Vieira" />
<meta name="generator" content="Org Mode" />
<style type="text/css">
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-22RF3F5XE0"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-22RF3F5XE0');
</script>
<link rel="stylesheet" type="text/css" href="../css/main.css" />
<link rel="stylesheet" type="text/css" href="../css/syntax.css" />
<link id="theme-css" rel="stylesheet" type="text/css" href="../css/dark-theme.css" />
<link rel="icon" type="image/jpg" href="../img/cat-i-mage.jpg" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta property="og:image" content="../img/cat-i-mage.jpg">
<meta name="theme-color" content="#14171e">
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="preamble" class="status">
<nav><h1><a href="../">The Alchemist's Hideout</a></h1></nav><h1 class="title">Apresentando Lisps e Majestic Lisp</h1><p><i>Escrito em Ago 05, 2020 por Lucas S. Vieira<br/><a href="mailto:lucasvieira@protonmail.com">lucasvieira@protonmail.com</a></i></p>
</div>
<div id="content" class="content">

<div id="orgd6d41fd" class="figure">
<p><img src="./img/i-love-lisp.png" alt="i-love-lisp.png" />
</p>
</div>

<p>
A  pandemia  de  COVID-19  chegou   e,  com  ela,  apareceu  também  o
distanciamento social. Ainda  que não seja algo legal, isso  nos deu a
oportunidade de reavaliar algumas atitudes  nas nossas vidas, e também
de, quem sabe, revisitar projetos antigos  que, no meu caso, eu sempre
deixava de lado e nunca terminava.
</p>

<p>
Um desses projetos  que eu queria desenvolver é a  implementação de um
<i>interpretador</i>   de  um   dialeto   de  Lisp.   Lisps  são   linguagens
não-convencionais,  no   sentido  de  não  estarem   próximas  do  que
normalmente aprendemos em cursos ou  faculdade, que são linguagens com
sintaxe similar a C.
</p>

<p>
Essa decisão culminou  na confecção de uma linguagem,  que ainda estou
finalizando, chamada Majestic Lisp. Ela veio como uma resposta a outro
interpretador, que eu estava fazendo em C, para outro dialeto de Lisp,
que  Paul Graham  inventou, chamado  <a href="http://www.paulgraham.com/bel.html">Bel</a>. Trouxe  também uma  coisa ou
outra de outros dialetos como Scheme,  Common Lisp e Clojure, e também
alguns conceitos de linguagens como APL.
</p>

<p>
A seguir,  vou descrever alguns  pontos básicos da linguagem.  Se você
for  completamente leigo  em  Lisp ou  programação  funcional, não  se
preocupe,  pois  esse post  foi  feito  pensando  em você.  Nada  será
explicado exaustivamente, mas espero que sirva para aguçar o paladar.
</p>
<div id="outline-container-orgbd568e5" class="outline-2">
<h2 id="orgbd568e5">O que é Lisp, afinal de contas?</h2>
<div class="outline-text-2" id="text-orgbd568e5">
<p>
Se você  caiu de paraquedas  nesse post, talvez não  saiba o que  é um
dialeto  de  Lisp.   Vou  dar  uma  explicação   resumida:  Lisps  são
<i>Processadores de  Listas</i>, ou  seja, linguagens  que operam  através de
percorrer <i>listas encadeadas</i>, interpretando-as.
</p>

<p>
Essa  característica é  muito  importante porque  nos  faz pensar  que
<i>dados são  código</i>, isto é,  nossos programas são escritos  através das
mesmas estruturas de dados que manipulam.
</p>

<p>
Isso significa  que podemos  fazer com  que nossos  programas produzam
facilmente  dados  que  sejam  <i>programas   válidos</i>.  O  nome  disso  é
<i>homoiconicidade</i>, uma  característica de algumas  linguagens, sobretudo
dos Lisps.
</p>

<p>
Lisps são linguagens com notação  <i>prefixa</i> (os operadores vêm antes dos
operandos),  e  geralmente  têm  uma sintaxe  com  muitos  parênteses,
ou seja, baseada em <i>s-expressions</i>. Essa sintaxe não é essencial para a
<i>homoiconicidade</i>,  mas  caiu no  gosto  dos  usuários  de LISP  1.5  (o
primeiro dialeto de Lisp), quando  John McCarthy a inventou, por volta
de 1960.
</p>
</div>
</div>
<div id="outline-container-orgbc8edba" class="outline-2">
<h2 id="orgbc8edba">Por que fazer uma linguagem?</h2>
<div class="outline-text-2" id="text-orgbc8edba">
<p>
Fazer  a sua  própria linguagem  de  programação é  um processo  muito
interessante   porque   te   induz   a  trabalhar   com   um   projeto
grande. Portanto, é uma forma muito boa de estudar programação.
</p>

<p>
Tomei para  mim alguns  princípios básicos durante  o desenvolvimento,
que  me  ajudaram a  nortear  o  que  pretendo  fazer e  também  como
administrar o desenvolvimento de Majestic Lisp:
</p>

<ol class="org-ol">
<li>Performance não  é  um  objetivo central.  Claro,  é  legal que  o
interpretador funcione rápido, mas para uma primeira implementação,
isso não é extremamente essencial;</li>
<li>A  própria   implementação   deveria  ser   didática  de   alguma
forma.  Assim, optei  pelo uso  de <i>literate  programming</i>, ou  seja,
escrevi um texto  didático em forma de livro, que  contém blocos de
código que podem depois serem compilados;</li>
<li>Deve  ser algo  simples, no  sentido de  que o  dialeto em  si não
traz nenhuma  surpresa, especialmente para quem  já está acostumado
com Lisps como Scheme, Common Lisp e Clojure;</li>
<li>Deve  mostrar  que  fazer   sua  própria  linguagem  não  é  algo
intangível! Muitos  novos desenvolvedores aproximam-se de  áreas de
interesse que nada têm a ver  com isso, vêem esse tipo de atividade
e acham extremamente "difícil". Já vi muitos desenvolvedores que se
dão por vencidos  antes mesmo de tentarem. Então  quero mostrar que
não é algo  impossível de se fazer e, dependendo  do projeto, não é
algo difícil &#x2013; talvez apenas complicado, pelo tamanho do projeto;</li>
<li>A linguagem deve poder ser  usada <i>algebricamente</i>, ou seja, eu quero
poder usar a linguagem também como uma notação em uma apresentação,
por exemplo.  Minha maior inspiração nesse quesito é o Ken Iverson,
criador da linguagem  APL, que surgiu de uma notação  que ele usava
em sala, nas aulas que dava na faculdade.</li>
</ol>

<p>
Sem mais delongas, vamos descrever a linguagem!
</p>
</div>
</div>
<div id="outline-container-orgd5df8d9" class="outline-2">
<h2 id="orgd5df8d9">REPL</h2>
<div class="outline-text-2" id="text-orgd5df8d9">
<p>
Antes de mais nada, a notação  para exemplos que utilizarei aqui é uma
notação que  simula um REPL. Sem  entrar muito em detalhes,  a ideia é
ter  um  console interativo  onde  digita-se  uma expressão  válida  e
recebe-se um resultado.
</p>

<p>
A  expressão  digitada será  sempre  prefixada  pelo  símbolo <code>&gt;</code>,  e  a
resposta virá sem recuo, logo abaixo da entrada.
</p>

<pre class="example" id="org12eeaf7">
&gt; entrada do usuário
resposta do interpretador
</pre>

<p>
Algumas  entradas também  poderão usar  múltiplas linhas.  Nesse caso,
elas terão recuo para conservarem  a indentação da linha prefixada com
<code>&gt;</code>.
</p>

<pre class="example" id="orgb2e6d49">
&gt; entrada do usuário
  com múltiplas linhas
resposta do interpretador
</pre>
</div>
</div>
<div id="outline-container-org5df8dee" class="outline-2">
<h2 id="org5df8dee">Tipos básicos</h2>
<div class="outline-text-2" id="text-org5df8dee">
<p>
Majestic Lisp é uma linguagem que começa pelos seus tipos mais básicos
de dados, tanto na sua construção quanto na sua descrição.
</p>

<p>
Majestic Lisp tem cinco  tipos básicos: <i>símbolos</i>, <i>números</i>, <i>caracteres</i>,
<i>cons</i> e  <i>streams</i>. Os  <i>streams</i> envolvem  leitura e  escrita em  linha de
comando e em  arquivos no sistema, e sua especificação  ainda não está
totalmente finalizada, então não vou dizer muito sobre eles.
</p>
</div>
<div id="outline-container-orge56859c" class="outline-3">
<h3 id="orge56859c">Símbolos</h3>
<div class="outline-text-3" id="text-orge56859c">
<p>
<i>Símbolos</i> são como palavras na  linguagem, e podem ser utilizados tanto
como valores quanto para nomear as coisas, algo que veremos logo mais.
</p>

<p>
Para usarmos  <i>símbolos</i> como valores, precisamos  <i>quotá-los</i>.  Isso pode
ser feito com um apóstrofo antes do símbolo:
</p>

<pre class="example" id="org8b1dc49">
&gt; 'foo
foo

&gt; 'bar
bar

&gt; 'lucas
lucas
</pre>

<p>
A ideia do  <i>quote</i> é informar ao interpretador para  que não interprete
o valor <i>quotado</i>; em vez disso, ele usa-o da forma como foi escrito.
</p>

<p>
Alguns símbolos especiais são <i>axiomas</i> da linguagem, e não precisam ser
<i>quotados</i>, pois eles <i>são interpretados como eles mesmos</i>:
</p>

<pre class="example" id="orgde0899c">
&gt; t
t

&gt; nil
nil
</pre>

<p>
<code>t</code>   e  <code>nil</code>   são   especiais  porque   indicam   <i>verdadeiro</i>  e   <i>falso</i>
respectivamente  e,  no  caso  de  <code>nil</code>, há  também  mais  um  uso  que
exploraremos a seguir.
</p>
</div>
</div>
<div id="outline-container-orgd0978a7" class="outline-3">
<h3 id="orgd0978a7">Números</h3>
<div class="outline-text-3" id="text-orgd0978a7">
<p>
Números  funcionam sintaticamente  como símbolos,  mas são  um tipo  à
parte  dos mesmos  por  conveniência.  Podemos representar  facilmente
números <i>inteiros</i>:
</p>

<pre class="example" id="orgeecee7f">
&gt; -1
-1

&gt; 23
23
</pre>

<p>
Podemos   também  representar   <i>frações</i>   e   <i>pontos  flutuantes</i>   com
facilidade.  Frações são números racionais  sempre exatos, e por isso,
só se admite números inteiros no numerador e no denominador, inclusive
efetuando simplificação quando necessário.
</p>

<p>
Os pontos flutuantes admitem omitir o  zero à esquerda da vírgula ou o
zero à  direita da vírgula,  quando as partes inteiras  e fracionárias
são nulas, respectivamente.
</p>

<pre class="example" id="org906ef5e">
&gt; 4/6
2/3

&gt; .125
0.125

&gt; 2.
2.0
</pre>

<p>
Os  números  complexos  são  implementados de  forma  diferente.  Eles
possuem uma  parte <i>real</i> e  uma parte  <i>imaginária</i>. Assim, eles  usam os
outros subtipos  de números para  representarem essas partes  à medida
que for necessário:
</p>

<pre class="example" id="orgda63ac9">
&gt; 2J5
2J5

&gt; -3J6/4
-3J3/2

&gt; 0J1
0J1
</pre>

<p>
Os números  complexos de Majestic  Lisp tomam emprestada a  notação de
APL,  que separa  as partes  do  número com  um <code>J</code>.  No exemplo  acima,
representamos os números \(2+5i\), \(-3+\frac{6}{4}i\) e \(0+1i\) (ou seja, \(i\)).
</p>
</div>
</div>
<div id="outline-container-org40b544b" class="outline-3">
<h3 id="org40b544b">Caracteres</h3>
<div class="outline-text-3" id="text-org40b544b">
<p>
Caracteres também funcionam mais ou menos como símbolos, sendo valores
que   são  interpretados   para  si   mesmos.  Quando   sozinhos,  são
interpretados com <i>jogo da velha</i> e uma <i>barra invertida</i> como prefixos:
</p>

<pre class="example" id="org5565cf2">
&gt; #\a
#\a

&gt; #\C
#\C
</pre>

<p>
Alguns  caracteres especiais  podem ser  representados com  nomes mais
literais, por exemplo, o caractere de campainha:
</p>

<pre class="example" id="org90fc8a8">
&gt; #\bel
#\bel
</pre>
</div>
</div>
<div id="outline-container-org39b9865" class="outline-3">
<h3 id="org39b9865"><i>Cons</i></h3>
<div class="outline-text-3" id="text-org39b9865">
<p>
O <i>cons</i> é um <i>par de valores</i>, o que significa que ele é um tipo e também
uma forma de <i>combinar</i> valores na linguagem.
</p>

<p>
<i>Cons</i> podem  ser criados através  do uso  da função <code>cons</code>;  veremos mais
sobre funções adiante.
</p>

<pre class="example" id="org82d5619">
&gt; (cons 'a 'b)
(a . b)
</pre>

<p>
Podemos  também  usar  a  ideia  de <i>quoting</i>  para  construir  um  <i>cons</i>
diretamente:
</p>

<pre class="example" id="orgcc519cc">
&gt; '(a . b)
(a . b)
</pre>

<p>
Um <i>cons</i> separa sintaticamente seus  elementos com um ponto. Chamamos a
parte da esquerda de  <i>car</i> (lê-se <i>cár</i>) ou <i>first,</i> e a  da direita de <i>cdr</i>
(lê-se <i>coul-der</i>) ou  <i>rest</i>. Para facilitar, vou me referir  a elas como
<i>first</i> e <i>rest</i>, por razões que veremos a seguir.
</p>
</div>
<div id="outline-container-orgabacaad" class="outline-4">
<h4 id="orgabacaad">Listas pontuadas</h4>
<div class="outline-text-4" id="text-orgabacaad">
<p>
Existem algumas  situações particulares quando  o <i>rest</i> de um  <i>cons</i> for
também um <i>cons</i>, independente de o <i>first</i> ser. Observe o exemplo:
</p>

<pre class="example" id="org4bbad3e">
&gt; '(a . (b . c))
(a b . c)
</pre>

<p>
Quando o <i>rest</i> de  um <i>cons</i> for também um <i>cons</i>,  podemos remover o ponto
que separa ambos os elementos, e também os parênteses do <i>cons</i> que está
no <i>rest</i> do primeiro.
</p>

<p>
Ou  seja,  no  exemplo  anterior,  remove-se o  ponto  após  <code>a</code>,  e  os
parênteses  ao redor  de <code>(b . c)</code>. Essa  notação é  chamada de  <i>lista
pontuada</i>.
</p>
</div>
</div>
<div id="outline-container-orgf096995" class="outline-4">
<h4 id="orgf096995">Listas adequadas</h4>
<div class="outline-text-4" id="text-orgf096995">
<pre class="example" id="org7726e85">
&gt; '(a . (b . (c . nil)))
(a b c)
</pre>

<p>
No exemplo acima, uma possível resposta seria <code>(a b c . nil)</code>, de acordo
com a regra  da lista pontuada. Porém, quando  a representação envolve
o  símbolo <code>nil</code>  ao final  da lista  pontuada, separado  por um  ponto,
pode-se omitir tanto o ponto como o <code>nil</code>.
</p>

<p>
Um encadeamento de  <i>cons</i> com essas características é  chamado de <i>lista
adequada</i>, ou simplesmente <i>lista</i>.
</p>

<p>
Podemos criar <i>listas</i> também através do processo direto de <i>quoting</i>:
</p>

<pre class="example" id="org12762ba">
&gt; '(1 2 3 4)
(1 2 3 4)
</pre>
</div>
</div>
<div id="outline-container-org2d51168" class="outline-4">
<h4 id="org2d51168">Lista vazia</h4>
<div class="outline-text-4" id="text-org2d51168">
<p>
O símbolo <code>nil</code> representa  a ideia de <i>falso</i> na linguagem  e também é um
terminador para  <i>listas</i>, mas também  representa uma <i>lista  vazia</i>. Isso
pode  ser  observado  quando  tentamos  interpretar  uma  lista  vazia
<i>quotada</i>:
</p>

<pre class="example" id="orgeeaff73">
&gt; '()
nil
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org41d979c" class="outline-2">
<h2 id="org41d979c">Listas como programas</h2>
<div class="outline-text-2" id="text-org41d979c">
<p>
As <i>listas</i> são a parte mais  importante de um Lisp e, consequentemente,
de Majestic Lisp. Nossos programas usam as notações de <i>listas</i> para que
façamos operações.  Esse foi o caso  quando usamos a função  <code>cons</code>.
</p>

<p>
Veremos agora  alguns exemplos  do que ocorre  quando damos  listas ao
interpretador, para que ele as processe diretamente.
</p>
</div>
<div id="outline-container-orgcb0547f" class="outline-3">
<h3 id="orgcb0547f">Definindo variáveis</h3>
<div class="outline-text-3" id="text-orgcb0547f">
<p>
Para definirmos variáveis, dando valores  a elas, utilizamos uma lista
também:
</p>

<pre class="example" id="orgfc7cf4f">
&gt; (def x 5)
x
</pre>

<p>
No  exemplo  anterior,  damos  ao interpretador  uma  lista  com  três
elementos: o símbolo <code>def</code>, o símbolo <code>x</code> e o número <code>5</code>, nessa ordem.
</p>

<p>
Como a lista não está  <i>quotada</i>, o interpretador tentará processá-la, e
retornará  algum  resultado. <code>def</code>  é  conhecido  como sendo  uma  <i>forma
especial</i>; o  que ela faz  é criar  uma relação entre  o símbolo <code>x</code>  e o
valor  <code>5</code>,  em  uma  tabela  global  que  normalmente  não  é  acessada
diretamente pelo programador.
</p>

<p>
Assim, se dermos ao interpretador o símbolo <code>x</code>&#x2026;
</p>

<pre class="example" id="org444fc56">
&gt; x
5
</pre>

<p>
&#x2026;ele  nos retornará  o valor  associado ao  mesmo &#x2013;  nesse caso,  o
número <code>5</code>.
</p>
</div>
</div>
<div id="outline-container-org38be136" class="outline-3">
<h3 id="org38be136">Funções</h3>
<div class="outline-text-3" id="text-org38be136">
<p>
Majestic  Lisp  já se  inicia  com  uma  certa quantidade  de  funções
<i>primitivas</i> que fazem bastantes coisas. Por exemplo, considere as somas
a seguir:
</p>

<pre class="example" id="org7060377">
&gt; (+ 2 3)
5

&gt; (+ 5 7 1)
13
</pre>

<p>
<code>+</code> é uma <i>função</i> primitiva que,  quando aplicada a dois ou mais valores,
soma-os,  produzindo um  resultado numérico.  Veja que  aqui fica  bem
claro o uso da notação <i>prefixa</i>, ou seja, o <code>+</code> aparece antes dos números
aos quais é aplicado.
</p>

<p>
A  notação  prefixa é  vantajosa  por  três motivos:  primeiro,  deixa
explícito o uso de <code>+</code> enquanto função. Segundo, remove a ambiguidade da
notação <i>infixa</i>, usada  na matemática, e portanto  não precisamos falar
em  precedência  nas  operações.   Terceiro,  reduz  a  repetição  dos
operadores &#x2013; como o próprio <code>+</code>.
</p>

<p>
Quando as funções primitivas não são suficientes na linguagem, podemos
definir  nossas próprias  funções.  Por exemplo,  podemos definir  uma
função que eleva um número ao quadrado, multiplicando-o por ele mesmo:
</p>

<pre class="example" id="orgd8ef5e8">
&gt; (fn (x) (* x x))
#&lt;function (fn (x)) {...}&gt;
</pre>

<p>
Veja  que o  interpretador  processa  a expressão  e  nos devolve  uma
<i>função</i>, que aqui, é um <i>valor</i>.
</p>

<p>
Isso  é um  conceito diferente  das  linguagens como  C: aqui,  nossas
funções  são valores  em  si! E  dessa forma,  elas  também podem  ser
atribuídas a símbolos, como se definíssemos variáveis quaisquer:
</p>

<pre class="example" id="org30e1b5e">
&gt; (def quadrado (fn (x) (* x x)))
quadrado

&gt; quadrado
#&lt;function (fn (x)) {...}&gt;
</pre>

<p>
Um  atalho para  esse  tipo de  definição  de função  é  usar o  <i>macro</i>
<code>defn</code>.
</p>

<pre class="example" id="orga72c2b0">
&gt; (defn quadrado (x)
    (* x x))
quadrado
</pre>

<p>
<i>Macros</i> são como funções  executadas em expressões antes de serem
interpretadas, como se operassem sobre expressões <i>quotadas</i>. Assim, uma
expressão iniciada por <code>defn</code> expande-se  para a anterior. Isso pode ser
visto através da função primitiva <code>macroexpand-1</code>:
</p>

<pre class="example" id="org7721f06">
&gt; (macroexpand-1 '(defn quadrado (x)
                    (* x x)))
(def quadrado (fn (x) (* x x)))
</pre>

<p>
Finalmente,   podemos  usar   a  função   em  valores,   como  fizemos
anteriormente com <code>cons</code> e <code>+</code>.
</p>

<pre class="example" id="org92ab07b">
&gt; (quadrado 5)
25
</pre>
</div>
</div>
</div>
<div id="outline-container-org19b680d" class="outline-2">
<h2 id="org19b680d">Conclusão</h2>
<div class="outline-text-2" id="text-org19b680d">
<p>
Isso encerra  a apresentação preliminar  de Lisp e também  de Majestic
Lisp. A linguagem  possui muitas outras características,  é claro. Uma
lista não-exaustiva (e sem muitas explicações!) inclui:
</p>

<ul class="org-ul">
<li>Funções do usuário com aplicação parcial;</li>
<li>Condicionais;</li>
<li>Escopo léxico em funções;</li>
<li>Objetos de macros;</li>
<li>Definição de macros;</li>
<li>Desestruturação <i>ad-hoc</i> dos parâmetros de funções e de macros;</li>
<li><i>Quasiquoting</i>,  ou  seja,  escrita  de listas  com  substituições  de
elementos <i>ad-hoc</i>;</li>
<li>Macros do leitor de expressões durante o <i>parsing</i>&#x2026;</li>
</ul>

<p>
Muitas dessas características  já aparecem em outros  dialetos de Lisp
(talvez  com  exceção  da  primeira),  mas Majestic  Lisp  não  tem  a
pretensão   de   substituí-los  ou   de   ser   um  novo   padrão   de
indústria.  Como  disse  anteriormente,  o  objetivo  é  primariamente
didático, seja  para mim, seja  para quem for  usar ou saber  como foi
implementado.
</p>

<p>
Atualmente  estou  trabalhando  no  penúltimo  elemento  dessa  lista,
enquanto o último depende  indiretamente da estabilização dos <i>streams</i>,
anteriormente citados. 
</p>

<p>
Até então, a linguagem está rumando  para algo que um programador Lisp
experiente não vê como surpresa, e  isso é bom, porque a linguagem não
deve surpreender sintaticamente.
</p>

<p>
Voltarei a escrever sobre Majestic  Lisp para falar sobre novidades na
linguagem, no futuro.
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<h3><a href="../">De volta à página anterior</a></h3>
</div>
</body>
</html>
