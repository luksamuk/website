<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Git</title>
<meta name="author" content="(Lucas S. Vieira)"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.css"/>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/theme/league.css" id="theme"/>


<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'https://cdn.jsdelivr.net/npm/reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h3>Git<br/></h3><p>Webinar Técnico<br/><br/>Lucas S. Vieira</h3><br/><p><a href="mailto:lucas.vieira@atsinformatica.com.br">lucas.vieira@atsinformatica.com.br</a><br/>21 de março de 2022<br/>ATS Informática</p>
</section>
<style type="text/css">
.reveal pre {
box-shadow: 0px 0px 0px rgba(0, 0, 0, 0) !important;
}
</style>

<style>
.container{
display: flex;
}
.col{
flex: 1;
}
</style>

<section>
<section id="slide-orgc59a4c3">
<h2 id="orgc59a4c3">O que é Git?</h2>

<div id="org74f5730" class="figure">
<p><img src="./git_img/git-logo.png" alt="git-logo.png" width="500px" />
</p>
</div>

</section>
<section id="slide-orgbc6aa2e">
<h3 id="orgbc6aa2e">Surgimento do Git</h3>
<div class="container">
<div class="col">
<p>
Criado por Linus Torvalds.
</p>

<p>
Feito para o Linux.
</p>

<p>
Ao contrário de  outros SCMs (como SVN), Git não  armazena <i>deltas</i>, e
sim <i>snapshots</i>.
</p>

</div>
<div class="col">


<div id="org53f44fd" class="figure">
<p><img src="./git_img/linus.jpg" alt="linus.jpg" width="500px" />
</p>
</div>

</div>
</div>

</section>
<section id="slide-orgb183b23">
<h3 id="orgb183b23">Git vs. GitHub</h3>

<div id="org60bd9d0" class="figure">
<p><img src="./git_img/Octocat.png" alt="Octocat.png" height="200px" />
</p>
</div>

<p>
Git = Controle de versão.
</p>

<p>
GitHub = <i>Git forge</i> e rede social.
</p>

</section>
<section id="slide-org7cbbd5c">
<h4 id="org7cbbd5c">Qual a importância de uma Git Forge?</h4>
<ul>
<li class="fragment highlight-blue">Portfolio;</li>
<li class="fragment highlight-blue">Compartilhamento de código aberto;</li>
<li class="fragment highlight-blue">Hospedagem de sites estáticos (GitHub Pages);</li>
<li class="fragment highlight-blue">Integração com outros serviços (ex. Heroku);</li>
<li class="fragment highlight-blue"><b>Comunidade!</b></li>

</ul>

</section>
<section id="slide-orgf1a7e4f">
<h3 id="orgf1a7e4f">Uso de linha de comando</h3>
<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>$ git status
$ git --help
</code></pre>
</div>

</section>
</section>
<section>
<section id="slide-org023b2b5">
<h2 id="org023b2b5">Fluxo padrão de Git</h2>
<div class="outline-text-2" id="text-org023b2b5">
</div>
</section>
<section id="slide-org1a7605e">
<h3 id="org1a7605e">Criando um repositório</h3>
<ul>
<li class="fragment grow">Via <code>git clone</code></li>
<li class="fragment grow">Via <code>git push</code> (manualmente)</li>
<li class="fragment grow">Forks de repositórios</li>

</ul>

</section>
<section id="slide-org5563ba6">
<h3 id="org5563ba6">Gerenciando commits</h3>
<div class="outline-text-3" id="text-org5563ba6">
</div>
</section>
<section id="slide-orga12d146">
<h4 id="orga12d146">Adicionando arquivos para a área de <i>staging</i></h4>
<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>$ git add arquivo.txt
$ git add .
$ git add -A
</code></pre>
</div>

</section>
<section id="slide-orgacfcf02">
<h4 id="orgacfcf02">Commits</h4>
<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>$ git commit
$ git commit -m <span style="color: #f5c791;">'Mensagem do commit'</span>
</code></pre>
</div>

</section>
<section id="slide-org7960a69">
<h4 id="org7960a69">Desfazendo commits</h4>
<p>
Para desfazer seu último commit na branch atual:
</p>

<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>$ git reset --soft HEAD~1
</code></pre>
</div>

<ul>
<li class="fragment appear">O número indica a quantidade de commits desfeitos.</li>
<li class="fragment appear">Se estiver no Git CMD, troque <code>~</code> por <code>^</code>.</li>
<li class="fragment appear">Caso  você queira  reverter  e  REMOVER as  alterações,  use a  flag
<code>--hard</code>.</li>

</ul>

</section>
<section id="slide-orgb852a00">
<h4 id="orgb852a00">Definindo o repositório remoto</h4>
<p>
Adicionar um  repositório remoto  chamado <code>origin</code> para  o repositório
atual.
</p>

<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>$ git remote add origin https://github.com/fulano/repo.git
</code></pre>
</div>

</section>
<section id="slide-org614d572">
<h4 id="org614d572">Enviando commits para o repositório remoto</h4>
<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>$ git push
</code></pre>
</div>

</section>
<section id="slide-org614d572-split">

<p>
Pode ser que o <i>upstream</i> da branch não esteja definido.
Podemos criar a branch no repositório remoto (<code>origin</code>).
</p>

<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>$ git push --set-upstream origin minha_branch
$ git push -u origin minha_branch
</code></pre>
</div>

</section>
<section id="slide-org95376a9">
<h3 id="org95376a9">Criando branches</h3>
<div class="outline-text-3" id="text-org95376a9">
</div>
</section>
<section id="slide-org7b6aec9">
<h4 id="org7b6aec9">Estilo <i>Git Flow</i></h4>
<ul>
<li class="fragment appear"><b>Branches padrão:</b> <code>master</code>, <code>develop</code></li>
<li class="fragment appear"><b>Novas implementações:</b> <code>feature/xxxx</code> (pela <code>develop</code>)</li>
<li class="fragment appear"><b>Correções de emergência (e SLAs):</b> <code>hotfix/xxxx</code> (pela <code>master</code>)</li>

</ul>

<div class="org-src-container">

<pre  class="fragment (appear)"   ><code trim>$ git checkout develop
$ git checkout -b feature/xxxx
</code></pre>
</div>

</section>
<section id="slide-orge6bb594">
<h3 id="orge6bb594">Gerenciando branches</h3>
<div class="outline-text-3" id="text-orge6bb594">
</div>
</section>
<section id="slide-orgd48e68b">
<h4 id="orgd48e68b">Deletar uma branch (local)</h4>
<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>$ git checkout outra_branch
$ git branch -d branch_original

$ git branch -D branch_original
</code></pre>
</div>

</section>
<section id="slide-org39a3cb3">
<h4 id="org39a3cb3">Deletar uma branch (remota)</h4>
<p>
Na verdade, fazemos um "<i>push</i> da remoção".
</p>

<p>
<code>origin</code> é o nome do repositório remoto.
</p>

<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>$ git push origin --delete branch_original
</code></pre>
</div>

<div class="org-src-container">

<pre  class="fragment (appear)"   ><code trim>$ git push origin :branch_original
</code></pre>
</div>

</section>
<section id="slide-org9d490a5">
<h4 id="org9d490a5">Remover e recuperar referências de branches remotas</h4>
<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>git fetch --prune
</code></pre>
</div>

</section>
</section>
<section>
<section id="slide-org9caa3b5">
<h2 id="org9caa3b5">Boas práticas</h2>
<div class="outline-text-2" id="text-org9caa3b5">
</div>
</section>
<section id="slide-orgcd9186f">
<h3 id="orgcd9186f">Ignorando arquivos</h3>
<p>
Alguns  arquivos  <b>não  deveriam</b>  subir para  o  Git  (salvo  algumas
exceções). Em geral: <i>arquivos binários</i> (blobs).
</p>

<p>
Isso pode ser feito com um arquivo <code>.gitignore</code>.
</p>

</section>
<section id="slide-orgcd9186f-split">

<p>
O arquivo pode ser colocado na raiz do repositório ou em uma subpasta.
</p>

<div class="org-src-container">

<pre  class="src src-text"   ><code trim>*.pdf
*.jpg
*.png
*.exe
*~
*.dcu
</code></pre>
</div>

</section>
<section id="slide-orgcd9186f-split">

<p>
Se for extremamente necessário  armazenar arquivos binários <b>grandes</b>,
use a extensão Git LFS (<i>Large File Support</i>).
</p>

<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>$ git lfs track <span style="color: #f5c791;">"*.mp3"</span>
$ git lfs track <span style="color: #f5c791;">"*.bin"</span>
$ git lfs track <span style="color: #f5c791;">"*.res"</span>
</code></pre>
</div>

<p>
<a href="https://www.atlassian.com/git/tutorials/git-lfs">https://www.atlassian.com/git/tutorials/git-lfs</a>
</p>

</section>
<section id="slide-org806648f">
<h3 id="org806648f">Atualizar uma branch</h3>
<p>
Pode  ser  necessário  atualizar  o  branch  atual  de  acordo  com  a
<code>develop</code>.
</p>

<p>
Há duas formas de fazer isto:
</p>

<ul>
<li class="fragment appear">Merge;</li>
<li class="fragment appear"><b>Rebase</b>.</li>

</ul>

</section>
<section id="slide-org806648f-split">

<p>
Antes de mais nada, atualize a <code>develop</code>.
</p>

<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>$ git checkout develop
$ git pull
$ git checkout feature/xxxx
</code></pre>
</div>

</section>
<section id="slide-orgb43e351">
<h4 id="orgb43e351">Merge</h4>
<p>
Basta atualizar a <code>develop</code> e dar merge na feature:
</p>

<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>$ git merge develop
</code></pre>
</div>

<p>
"Merge <code>develop</code> into <code>feature/xxx</code>"
</p>

</section>
<section id="slide-org8c986cb">
<h4 id="org8c986cb">Rebase</h4>
<p>
O <i>rebase</i> opera sob o seguinte fluxo:
</p>

<ol>
<li class="fragment appear">"Rebobina" sua branch atual até o ponto em comum com a <code>develop</code>;</li>
<li class="fragment appear">Recupera todos os novos commits que estão na <code>develop</code>;</li>
<li class="fragment appear">Reaplica os commits da sua branch novamente, um a um.</li>

</ol>

</section>
<section id="slide-org8c986cb-split">

<p>
O <i>rebase</i> efetivamente  <b>modifica o histórico da branch</b>,  por isso é
necessário ter acesso de mudança na branch.
</p>

<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>$ git rebase develop
</code></pre>
</div>

<p>
"Rebase feature/xxxx onto develop"
</p>

</section>
<section id="slide-org8c986cb-split">


<div id="org9ad884f" class="figure">
<p><img src="./git_img/rebase1.png" alt="rebase1.png" />
</p>
</div>

</section>
<section id="slide-org8c986cb-split">


<div id="org6f9e7dd" class="figure">
<p><img src="./git_img/rebase2.png" alt="rebase2.png" />
</p>
</div>

</section>
<section id="slide-org0e18291">
<h4 id="org0e18291">Regra de ouro do Rebase</h4>
<p>
<b>Nunca, NUNCA faça rebase em uma branch PÚBLICA.</b>
</p>

<p class="fragment (appear)">
Ex: Completar PR de <code>feature/xxxx</code> para <code>develop</code> com <i>rebase</i>.
</p>

<p class="fragment (appear)">
Motivo: Vai zuar a <code>develop</code> <b>PRA TODO MUNDO</b>.
</p>

</section>
<section id="slide-org72dd157">
<h4 id="org72dd157">Desvantagens do rebase</h4>
<ol>
<li class="fragment appear">Basicamente <b>refaz o histórico da branch</b>.</li>
<li class="fragment appear">Dependendo do uso, um <i>rebase</i> pode gerar mais de um conflito.</li>
<li class="fragment appear">O <i>rebase</i> na verdade é um "Comando Bombril".</li>

</ol>

</section>
<section id="slide-org50dedcd">
<h4 id="org50dedcd">Qual escolher?</h4>
<p>
O histórico do Git em si é um documento. Ele pode significar:
</p>

<ol>
<li class="fragment appear">O percurso de <i>COMO</i> e <i>QUANDO</i> foram feitos os commits;</li>
<li class="fragment appear">Uma linha lógica de desenvolvimento de cada task.</li>

</ol>

</section>
<section id="slide-org50dedcd-split">

<p class="fragment (appear)">
Para  o  primeiro caso,  atualize  sua  branch  com <i>merges</i>.  Para  o
segundo, use <i>rebases</i>.
</p>

<div class="org-src-container">

<pre  class="fragment (appear)"   ><code trim>$ git log
$ git log --oneline
$ git log --graph
$ git log --graph --oneline
</code></pre>
</div>

</section>
</section>
<section>
<section id="slide-orgc4d1c8d">
<h2 id="orgc4d1c8d">Produtividade com Git</h2>
<div class="outline-text-2" id="text-orgc4d1c8d">
</div>
</section>
<section id="slide-org030b649">
<h3 id="org030b649">Commits em branches erradas</h3>
<div class="outline-text-3" id="text-org030b649">
</div>
</section>
<section id="slide-orgb23d343">
<h4 id="orgb23d343">Caso 1</h4>
<p>
"Estou na develop, fiz commit e não criei minha branch!"
</p>

<ol>
<li class="fragment highlight-green">Crie a branch a partir da <code>develop</code>;</li>
<li class="fragment highlight-green">Volte para a <code>develop</code>;</li>
<li class="fragment highlight-green">Desfaça o commit (apagando);</li>
<li class="fragment highlight-green">Vá para a branch nova e o commit estará lá.</li>

</ol>

</section>
<section id="slide-orgb23d343-split">

<p>
Começando da <code>develop</code>:
</p>

<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>$ git checkout -b feature/xxxx
$ git checkout develop
$ git reset --hard HEAD~1
$ git checkout feature/xxxx
</code></pre>
</div>

<p>
Para mais de um commit, ajuste o <code>git reset</code>.
</p>

</section>
<section id="slide-org63fc418">
<h4 id="org63fc418">Caso 2</h4>
<p>
"Estou na  master, fiz  commit, mas  deveria ter  criado uma  branch a
partir da develop!"
</p>

<p class="fragment (appear)">
Para começar: Nada de pânico.
</p>

</section>
<section id="slide-org63fc418-split">

<ol>
<li class="fragment highlight-green">Abra o log;</li>
<li class="fragment highlight-green">Anote o <i>hash</i> do commit (pode ser o pequeno);</li>
<li class="fragment highlight-green">Crie a branch normalmente;</li>
<li class="fragment highlight-green">Faça <b>cherry-pick</b> do commit para a sua branch;</li>
<li class="fragment highlight-green">Desfaça o commit na <code>master</code>.</li>

</ol>

</section>
<section id="slide-org63fc418-split">

<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>$ git log --oneline

$ git checkout develop
$ git checkout -b feature/xxxx
$ git cherry-pick f5a0f14
$ git checkout master
$ git reset --hard HEAD~1
</code></pre>
</div>

<ul>
<li>Pode dar conflito.</li>
<li>Para mais commits,  ajuste a quantidade de  cherry-picks (faça-os em
ordem!) e ajuste o <code>git reset</code>.</li>

</ul>

</section>
<section id="slide-orga069ccc">
<h3 id="orga069ccc">Investigando através do Git</h3>

</section>
<section id="slide-org23744f3">
<h3 id="org23744f3">Revertendo merges</h3>

</section>
</section>
<section>
<section id="slide-org60cad67">
<h2 id="org60cad67">Referências</h2>
</section>
</section>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
slideNumber:true,

// Optional libraries used to extend on reveal.js
dependencies: [
,
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } }]

});

</script>
</body>
</html>
